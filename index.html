<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KCL PNOMH Graduation Planner</title>
<style>
:root{--r:#d50032;--ink:#111827;--mut:#6b7280;--bg:#fafafa;--line:#e5e7eb}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--ink);font-family:system-ui,sans-serif;line-height:1.5}
header{background:var(--r);color:#fff;padding:1.25rem}
h1{font-size:1.5rem;font-weight:700}
.sub{opacity:.9;font-size:.9rem;margin-top:.25rem}
.container{max-width:1400px;margin:0 auto;padding:1rem}
.grid{display:grid;gap:1rem}
@media(min-width:900px){.grid{grid-template-columns:360px 1fr}}
.card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,.04)}
h3{font-size:1.1rem;margin-bottom:.75rem}
label{display:block;font-size:.8rem;color:var(--mut);margin-bottom:.35rem;font-weight:500}
select,button{width:100%;padding:.6rem;border-radius:8px;border:1px solid var(--line);background:#fff;font-size:.9rem}
button{cursor:pointer;font-weight:600;transition:all .2s}
.btn{background:var(--r);color:#fff;border:none}
.btn:hover{opacity:.9;transform:translateY(-1px)}
.btn.sec{background:#fff;color:var(--ink)}
.btn.sec:hover{background:#f9fafb}
.row{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;margin-bottom:.75rem}
.tags{display:flex;gap:.4rem;flex-wrap:wrap}
.chip{background:#f3f4f6;border:1px solid var(--line);border-radius:999px;padding:.25rem .6rem;font-size:.75rem;cursor:pointer;user-select:none;transition:all .2s}
.chip:hover{background:#e5e7eb}
.chip input{margin-right:.35rem}
.timeline{display:grid;gap:.65rem}
.term{border:1px solid var(--line);border-radius:8px;padding:.75rem;background:#fff;transition:all .2s}
.term:hover{border-color:#94a3b8;box-shadow:0 2px 6px rgba(0,0,0,.08)}
.termHd{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px solid var(--line)}
.termTtl{font-weight:700;font-size:1rem}
.modGrid{display:grid;gap:.4rem;margin-top:.5rem}
.mod{border:1px solid #cbd5e1;background:#f8fafc;border-radius:8px;padding:.5rem .7rem;font-size:.85rem;display:flex;align-items:center;gap:.5rem;transition:all .2s}
.mod:hover{background:#e2e8f0;border-color:#94a3b8}
.mod.taken{background:#dcfce7;border-color:#86efac;font-weight:600}
.mod.available{background:#fff;border-color:#cbd5e1}
.mod.unavailable{background:#f1f5f9;border-color:#e2e8f0;opacity:.6}
.modIcon{font-size:1.1rem}
.brk{background:#fff7ed;border-color:#fed7aa}
.syn{background:#fef2f2;border-color:#fecaca}
.kbd{border:1px solid var(--line);background:#f9fafb;border-radius:4px;font-size:.75rem;padding:.2rem .4rem;font-family:monospace}
.sum{margin-top:.5rem;padding:.75rem;background:#f9fafb;border-radius:8px;font-size:.85rem}
.grad{background:#f0f9ff;border:2px solid #0ea5e9;border-radius:8px;padding:.75rem;margin-top:.65rem;font-weight:600}
.warn{color:#f59e0b;font-weight:600}
.ok{color:#16a34a;font-weight:600}
.bad{color:#ef4444;font-weight:600}
.warnBox{margin-top:.75rem;padding:.6rem;background:#fef2f2;border:1px solid #fecaca;border-radius:6px;font-size:.85rem;display:none}
.progBar{height:28px;background:#e5e7eb;border-radius:12px;overflow:hidden;margin:.5rem 0}
.progFill{height:100%;background:linear-gradient(90deg,#0ea5e9,#06b6d4);transition:width .5s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem;font-weight:700}
.vis{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin-top:1rem}
.visCard{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px;padding:1rem;color:#fff;text-align:center;box-shadow:0 4px 12px rgba(102,126,234,.3)}
.visCard.alt1{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%)}
.visCard.alt2{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%)}
.visCard.alt3{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%)}
.visNum{font-size:2.2rem;font-weight:700;margin:.5rem 0}
.visLbl{font-size:.85rem;opacity:.9}
.legend{display:flex;gap:.75rem;margin:.75rem 0;font-size:.8rem;flex-wrap:wrap}
.legend span{display:flex;align-items:center;gap:.3rem}
.breakBtn{cursor:pointer;padding:.35rem .6rem;background:#fff7ed;border:1px solid #fed7aa;border-radius:6px;font-size:.8rem;font-weight:600;color:#f59e0b;transition:all .2s}
.breakBtn:hover{background:#ffedd5;transform:scale(1.05)}
.stage{background:#f0f9ff;border-left:4px solid #0ea5e9;padding:.5rem;margin-bottom:.5rem;border-radius:4px;font-size:.85rem;font-weight:600}
</style>
</head>
<body>
<header>
<div class="container">
<h1>King's College London â€” PNOMH Graduation Planner</h1>
<div class="sub">Complete view of all modules per intake with prerequisite tracking</div>
</div>
</header>
<main class="container grid">
<section class="card">
<h3>1) Your Setup</h3>
<div class="row">
<div><label for="award">Award</label>
<select id="award">
<option value="PGCert">PG Cert (60c)</option>
<option value="PGDip">PG Dip (120c)</option>
<option value="MSc" selected>MSc (180c)</option>
</select></div>
<div><label for="start">Start Window</label>
<select id="start"></select></div>
</div>
<div class="row" style="margin-top:.75rem">
<button id="gen" class="btn">Generate Plan</button>
<button id="reset" class="btn sec">Reset All</button>
</div>
</section>
<section class="card">
<h3>2) Choose 4 Options</h3>
<div class="tags" id="opts"></div>
<div id="wbox" class="warnBox"></div>
</section>
<section class="card" style="grid-column:1/-1">
<h3>3) Visual Analytics</h3>
<div class="vis">
<div class="visCard"><div class="visLbl">Total Duration</div><div class="visNum" id="vDur">â€”</div><div class="visLbl">months</div></div>
<div class="visCard alt1"><div class="visLbl">Study Breaks</div><div class="visNum" id="vBrk">â€”</div><div class="visLbl">breaks taken</div></div>
<div class="visCard alt2"><div class="visLbl">Completion</div><div class="visNum" id="vPct">â€”</div><div class="visLbl">progress</div></div>
<div class="visCard alt3"><div class="visLbl">Graduation</div><div class="visNum" id="vGrad">â€”</div><div class="visLbl">estimated</div></div>
</div>
<div id="progWrap">
<label style="margin:.75rem 0 .25rem 0">Overall Progress</label>
<div class="progBar"><div class="progFill" id="progFill" style="width:0%">0%</div></div>
</div>
</section>
<section class="card" style="grid-column:1/-1">
<h3>4) Your Study Plan - All Modules Per Intake</h3>
<div class="legend">
<span>âœ… Module Taken</span>
<span>â¬œ Available to Take</span>
<span>ğŸ”’ Prerequisites Not Met</span>
<span>ğŸ“… Study Break</span>
</div>
<div class="stage">ğŸ“˜ Stage 1: Foundation Modules (must complete all 4 first)</div>
<div class="stage" style="background:#fef2f2;border-color:#ef4444">ğŸ“• Stage 2: Option Modules (after foundation complete)</div>
<div class="stage" style="background:#f3e8ff;border-color:#a855f7">ğŸ“— Stage 3: Research Skills (after options complete)</div>
<div class="stage" style="background:#f3f4f6;border-color:#6b7280">ğŸ““ Stage 4: Synoptic Project (after research complete)</div>
<div id="tl" class="timeline"></div>
<div class="sum" id="sum"></div>
<div id="grad" class="grad" style="display:none"></div>
</section>
</main>
<script>
const F=['Biological Foundations of Mental Health','Techniques in Neuroscience','Psychological Foundations of Mental Health','Mental Health in the Community'];
const O=['Mindfulness: Neuroscience & Application','Global Mental Health','Psychology & Neuroscience of Addiction','Child & Adolescent Mental Health','Social, Genetic & Environmental Basis of Mental Health','Neuroscience in Society','Psychology & Neuroscience of Affective Disorders','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Pharmacotherapies in Mental Health','Contemporary Advances in Neuroscience','Neurodevelopmental Disorders: from Bench to Bedside'];
const R=['Research Skills: From Reviewing & Critical Analysis to Research Ethics','Research Skills: From Methods & Procedures to Analysis & Reporting'];
const S=['Independent Synoptic Project'];
const SCH={'2024-09':['Mental Health in the Community','Child & Adolescent Mental Health','Global Mental Health','Neurodevelopmental Disorders: from Bench to Bedside','Research Skills: From Reviewing & Critical Analysis to Research Ethics'],'2024-10':['Biological Foundations of Mental Health','Psychology & Neuroscience of Addiction','Mindfulness: Neuroscience & Application','Contemporary Advances in Neuroscience','Research Skills: From Methods & Procedures to Analysis & Reporting'],'2025-01':['Techniques in Neuroscience','Psychology & Neuroscience of Affective Disorders','Neuroscience in Society','Social, Genetic & Environmental Basis of Mental Health','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2025-03':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Pharmacotherapies in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2025-05':['Mental Health in the Community','Child & Adolescent Mental Health','Global Mental Health','Neurodevelopmental Disorders: from Bench to Bedside','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2025-06':['Biological Foundations of Mental Health','Psychology & Neuroscience of Addiction','Mindfulness: Neuroscience & Application','Contemporary Advances in Neuroscience','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2025-09':['Mental Health in the Community','Child & Adolescent Mental Health','Global Mental Health','Neurodevelopmental Disorders: from Bench to Bedside','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2025-10':['Biological Foundations of Mental Health','Psychology & Neuroscience of Addiction','Mindfulness: Neuroscience & Application','Research Skills: From Methods & Procedures to Analysis & Reporting'],'2026-01':['Techniques in Neuroscience','Psychology & Neuroscience of Affective Disorders','Neuroscience in Society','Social, Genetic & Environmental Basis of Mental Health','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2026-03':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Pharmacotherapies in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2026-05':['Mental Health in the Community','Child & Adolescent Mental Health','Global Mental Health','Neurodevelopmental Disorders: from Bench to Bedside','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2026-06':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2026-09':['Techniques in Neuroscience','Psychology & Neuroscience of Affective Disorders','Neuroscience in Society','Social, Genetic & Environmental Basis of Mental Health','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2026-10':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting'],'2027-01':['Techniques in Neuroscience','Psychology & Neuroscience of Affective Disorders','Neuroscience in Society','Social, Genetic & Environmental Basis of Mental Health','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2027-03':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2027-05':['Mental Health in the Community','Child & Adolescent Mental Health','Global Mental Health','Neurodevelopmental Disorders: from Bench to Bedside','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2027-06':['Biological Foundations of Mental Health','Psychology & Neuroscience of Addiction','Mindfulness: Neuroscience & Application','Contemporary Advances in Neuroscience','Research Skills: From Methods & Procedures to Analysis & Reporting','Independent Synoptic Project'],'2027-09':['Techniques in Neuroscience','Psychology & Neuroscience of Affective Disorders','Neuroscience in Society','Social, Genetic & Environmental Basis of Mental Health','Research Skills: From Reviewing & Critical Analysis to Research Ethics','Independent Synoptic Project'],'2027-10':['Psychological Foundations of Mental Health','Psychology & Neuroscience of Psychosis','Neuroimaging in Mental Health','Research Skills: From Methods & Procedures to Analysis & Reporting']};
const REQ={PGCert:{f:4,o:0,r:0,s:0},PGDip:{f:4,o:4,r:0,s:0},MSc:{f:4,o:4,r:2,s:1}};
const keys=Object.keys(SCH).sort();
const brks=new Set();
const taken=new Map();
const startS=document.getElementById('start');
keys.forEach(k=>{const[y,m]=k.split('-').map(Number);const d=new Date(y,m-1,1);const o=document.createElement('option');o.value=k;o.textContent=d.toLocaleString('en-GB',{month:'short',year:'numeric'});startS.appendChild(o);});
startS.value='2024-09';
const optsW=document.getElementById('opts');
O.forEach(n=>{const id='o'+n.replace(/[^a-z0-9]/gi,'');const l=document.createElement('label');l.className='chip';l.innerHTML=`<input type="checkbox" id="${id}" data-name="${n}">${n}`;optsW.appendChild(l);});
function getOpts(){return[...document.querySelectorAll('#opts input:checked')].map(c=>c.dataset.name).slice(0,4)}
function addY(k,y){const[yr,m]=k.split('-').map(Number);return`${yr+y}-${String(m).padStart(2,'0')}`}
function fmtD(k){const[y,m]=k.split('-').map(Number);return new Date(y,m-1,1).toLocaleString('en-GB',{month:'short',year:'numeric'})}
function getType(m){if(F.includes(m))return'f';if(O.includes(m))return'o';if(R.includes(m))return'r';if(S.includes(m))return's';return'u'}
function canTake(m,tkn,rq,cho){const t=getType(m);if(t==='f')return tkn.f<rq.f;if(t==='o')return tkn.f>=rq.f&&tkn.o<rq.o&&(cho.length===0||cho.includes(m));if(t==='r')return tkn.f>=rq.f&&tkn.o>=rq.o&&tkn.r<rq.r;if(t==='s')return tkn.f>=rq.f&&tkn.o>=rq.o&&tkn.r>=rq.r&&tkn.s<rq.s;return false}
function gen(){const aw=document.getElementById('award').value;const st=startS.value;const rq={...REQ[aw]};const cho=getOpts();const wb=document.getElementById('wbox');if(rq.o>0&&cho.length<4){wb.textContent=`âš ï¸ Select 4 options for ${aw}`;wb.style.display='block';}else{wb.style.display='none';}let tkn={f:0,o:0,r:0,s:0};const hs=addY(st,6);const itk=keys.filter(k=>k>=st&&k<=hs);taken.forEach((v,k)=>{const t=getType(v);if(t==='f')tkn.f++;if(t==='o')tkn.o++;if(t==='r')tkn.r++;if(t==='s')tkn.s++;});render(itk,st,rq,tkn,cho);vis(itk,tkn,rq,st);}
function render(itk,st,rq,tkn,cho){const el=document.getElementById('tl');el.innerHTML='';itk.forEach(k=>{const term=document.createElement('div');term.className='term';const ttl=fmtD(k);const isBreak=brks.has(k);const inSyn=taken.get(k)==='Independent Synoptic Project';const meta=[];if(k===addY(st,2))meta.push('<span class="warn">â±ï¸ 2-yr target</span>');if(k===addY(st,6))meta.push('<span class="bad">ğŸš« 6-yr max</span>');let hdr=`<div class="termHd"><div class="termTtl">${ttl}</div><div style="font-size:.85rem">${meta.join(' ')}</div></div>`;if(isBreak){const bb=document.createElement('button');bb.className='breakBtn';bb.textContent='âŒ Remove Break';bb.onclick=()=>{brks.delete(k);gen();};hdr+=`<div style="background:#fff7ed;padding:.75rem;border-radius:8px;text-align:center"><div style="font-size:1.5rem">ğŸ“…</div><div style="font-weight:600;margin-top:.25rem">Study Break</div></div>`;term.innerHTML=hdr;term.appendChild(bb);}else if(inSyn){hdr+=`<div class="mod taken syn"><span class="modIcon">â¬›</span><span>Independent Synoptic Project (period 1 of 2)</span></div>`;term.innerHTML=hdr;}else{const mds=SCH[k]||[];const tkMod=taken.get(k);let curTkn={...tkn};for(const [pk,pm]of taken){if(pk<k){const pt=getType(pm);if(pt==='f')curTkn.f++;if(pt==='o')curTkn.o++;if(pt==='r')curTkn.r++;if(pt==='s')curTkn.s++;}}const grid=document.createElement('div');grid.className='modGrid';mds.forEach(m=>{const isTaken=tkMod===m;const canTk=canTake(m,curTkn,rq,cho);const div=document.createElement('div');div.className='mod';if(isTaken){div.classList.add('taken');const t=getType(m);const ic={'f':'ğŸŸ¦','o':'ğŸŸ¥','r':'ğŸŸª','s':'â¬›'};div.innerHTML=`<span class="modIcon">âœ…</span><span><strong>${m}</strong></span>`;div.onclick=()=>{taken.delete(k);gen();};}else if(canTk){div.classList.add('available');const t=getType(m);const ic={'f':'ğŸŸ¦','o':'ğŸŸ¥','r':'ğŸŸª','s':'â¬›'};div.innerHTML=`<span class="modIcon">${ic[t]}</span><span>${m}</span>`;div.onclick=()=>{if(t==='s'){taken.set(k,m);const nk=keys[keys.indexOf(k)+1];if(nk)taken.set(nk,m);}else{taken.set(k,m);}gen();};}else{div.classList.add('unavailable');div.innerHTML=`<span class="modIcon">ğŸ”’</span><span>${m}</span>`;}grid.appendChild(div);});const bb=document.createElement('button');bb.className='breakBtn';bb.textContent='ğŸ“… Set as Study Break';bb.style.marginTop='.5rem';bb.onclick=()=>{taken.delete(k);brks.add(k);gen();};term.innerHTML=hdr;term.appendChild(grid);term.appendChild(bb);}el.appendChild(term);});const se=document.getElementById('sum');se.innerHTML=`<strong>Progress:</strong> <span class="kbd">Foundation ${tkn.f}/${rq.f}</span> <span class="kbd">Options ${tkn.o}/${rq.o}</span> <span class="kbd">Research ${tkn.r}/${rq.r}</span> <span class="kbd">Synoptic ${tkn.s}/${rq.s}</span>`;const ge=document.getElementById('grad');const lastK=[...taken.keys()].sort().pop();if(lastK&&tkn.f>=rq.f&&tkn.o>=rq.o&&tkn.r>=rq.r&&tkn.s>=rq.s){ge.style.display='block';ge.style.background='#f0f9ff';ge.style.borderColor='#0ea5e9';ge.innerHTML=`ğŸ“ <strong>Estimated Graduation:</strong> <span class="ok">${fmtD(lastK)}</span>`;}else if(lastK){ge.style.display='block';ge.style.background='#fef2f2';ge.style.borderColor='#f87171';ge.innerHTML='âš ï¸ <strong>Incomplete Plan</strong> - Please complete all required modules';}else{ge.style.display='none';}}
function vis(itk,tkn,rq,st){const lastK=[...taken.keys()].sort().pop();if(lastK){const[y,m]=lastK.split('-').map(Number);const[sy,sm]=st.split('-').map(Number);const dur=(y-sy)*12+(m-sm);document.getElementById('vDur').textContent=dur;}else{document.getElementById('vDur').textContent='â€”';}document.getElementById('vBrk').textContent=brks.size;const tot=rq.f+rq.o+rq.r+rq.s;const cur=tkn.f+tkn.o+tkn.r+tkn.s;const pct=tot>0?Math.round((cur/tot)*100):0;document.getElementById('vPct').textContent=pct+'%';const progF=document.getElementById('progFill');progF.style.width=pct+'%';progF.textContent=pct+'%';if(lastK){document.getElementById('vGrad').textContent=fmtD(lastK).replace(' ','\\n');}else{document.getElementById('vGrad').textContent='â€”';}}
document.getElementById('gen').addEventListener('click',gen);
document.getElementById('reset').addEventListener('click',()=>{taken.clear();brks.clear();[...document.querySelectorAll('#opts input')].forEach(i=>i.checked=false);gen();});
startS.addEventListener('change',gen);
gen();
</script>
</body>
</html>
